import psycopg2; import os; conn = psycopg2.connect(host=os.getenv('DB_HOST','login_login-aut-db'), port=int(os.getenv('DB_PORT',5432)), user=os.getenv('DB_USER','postgres'), password=os.getenv('DB_PASSWORD','fa0e7201e1773b163eb3'), database=os.getenv('DB_NAME','auth_db')); cur = conn.cursor(); print('\nüìä USU√ÅRIOS NO BANCO:\n'); cur.execute("SELECT id, email, LEFT(senha, 20) as senha, nome, ativo FROM usuarios"); rows = cur.fetchall(); [print(f"Email: {r[1]}\nSenha: {r[2]}\nTipo: {'bcrypt' if r[2].startswith('$2') else 'plaintext'}\n") for r in rows]; cur.execute("SELECT email, senha FROM usuarios WHERE email='teste@email.com'"); user = cur.fetchone(); print('\nüîç teste@email.com:') if user else None; print(f"Senha: {user[1]}") if user else print("‚ùå N√£o encontrado"); cur.close(); conn.close()
